<!DOCTYPE html>
<html>
<head>
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞—Ä–∞–±–æ—Ç–Ω—ã—Ö –ø–ª–∞—Ç</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1, h2, h3 { color: #333; }
        .stat-container { display: flex; flex-wrap: wrap; gap: 15px; margin: 20px 0; }
        .stat-card { 
            background: white; 
            padding: 15px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
            flex: 1; 
            min-width: 200px; 
        }
        .stat-card h4 { margin-top: 0; color: #4CAF50; }
        .stat-value { 
            font-size: 24px; 
            font-weight: bold; 
            color: #2196F3; 
            margin: 10px 0; 
        }
        .stat-label { color: #666; font-size: 0.9em; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        .nav-links { margin: 20px 0; }
        .nav-links a { 
            background-color: #4CAF50; 
            color: white; 
            padding: 8px 15px; 
            text-decoration: none; 
            border-radius: 4px; 
            margin-right: 10px; 
        }
        .nav-links a:hover { background-color: #45a049; }
        .section { margin: 30px 0; }
        .highlight { background-color: #e8f4f8; padding: 15px; border-radius: 5px; }
        .warning { 
            background-color: #fff3cd; 
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .employee-type {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .junior { background-color: #ffeb3b; color: #333; }
        .middle { background-color: #4caf50; color: white; }
        .senior { background-color: #2196f3; color: white; }
        .lead { background-color: #9c27b0; color: white; }
        .manager { background-color: #ff9800; color: white; }
    </style>
</head>
<body>
    <div class="nav-links">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/analytics/">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
    </div>
    
    <h1>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞—Ä–∞–±–æ—Ç–Ω—ã—Ö –ø–ª–∞—Ç</h1>
    
    {% if analytics %}
    
    <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ pandas –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω -->
    {% if not analytics.pandas_available %}
    <div class="warning">
        <h3>‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
        <p>–î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å Pandas —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:</p>
        <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0;">
pip install pandas numpy</pre>
    </div>
    {% endif %}
    
    <div class="section">
        <h2>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</h2>
        <div class="stat-container">
            <div class="stat-card">
                <h4>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</h4>
                <div class="stat-value">{{ analytics.total_employees }}</div>
                <div class="stat-label">—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ</div>
            </div>
            
            {% if analytics.correlation_exp_salary %}
            <div class="stat-card">
                <h4>–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å—Ç–∞–∂-–∑–∞—Ä–ø–ª–∞—Ç–∞</h4>
                <div class="stat-value">{{ analytics.correlation_exp_salary|floatformat:3 }}</div>
                <div class="stat-label">
                    {% if analytics.correlation_exp_salary > 0.7 %}
                    –°–∏–ª—å–Ω–∞—è –ø—Ä—è–º–∞—è —Å–≤—è–∑—å
                    {% elif analytics.correlation_exp_salary > 0.3 %}
                    –£–º–µ—Ä–µ–Ω–Ω–∞—è —Å–≤—è–∑—å
                    {% elif analytics.correlation_exp_salary > 0 %}
                    –°–ª–∞–±–∞—è —Å–≤—è–∑—å
                    {% elif analytics.correlation_exp_salary == 0 %}
                    –ù–µ—Ç —Å–≤—è–∑–∏
                    {% else %}
                    –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            {% if analytics.salary_stats.sum %}
            <div class="stat-card">
                <h4>–û–±—â–∏–π —Ñ–æ–Ω–¥ –æ–ø–ª–∞—Ç—ã</h4>
                <div class="stat-value">{{ analytics.salary_stats.sum|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">—Å—É–º–º–∞ –≤—Å–µ—Ö –æ–∫–ª–∞–¥–æ–≤</div>
            </div>
            {% endif %}
        </div>
    </div>
    
    <div class="section">
        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–∫–ª–∞–¥–∞–º</h2>
        <div class="stat-container">
            {% if analytics.salary_stats.mean %}
            <div class="stat-card">
                <h4>–°—Ä–µ–¥–Ω–∏–π –æ–∫–ª–∞–¥</h4>
                <div class="stat-value">{{ analytics.salary_stats.mean|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">—Å—Ä–µ–¥–Ω—è—è –≤–µ–ª–∏—á–∏–Ω–∞</div>
            </div>
            {% endif %}
            
            {% if analytics.salary_stats.median %}
            <div class="stat-card">
                <h4>–ú–µ–¥–∏–∞–Ω–Ω—ã–π –æ–∫–ª–∞–¥</h4>
                <div class="stat-value">{{ analytics.salary_stats.median|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">—Å–µ—Ä–µ–¥–∏–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</div>
            </div>
            {% endif %}
            
            {% if analytics.salary_stats.max %}
            <div class="stat-card">
                <h4>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–∫–ª–∞–¥</h4>
                <div class="stat-value">{{ analytics.salary_stats.max|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">–Ω–∞–∏–≤—ã—Å—à–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞</div>
            </div>
            {% endif %}
            
            {% if analytics.salary_stats.min %}
            <div class="stat-card">
                <h4>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–∫–ª–∞–¥</h4>
                <div class="stat-value">{{ analytics.salary_stats.min|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">–Ω–∞–∏–º–µ–Ω—å—à–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞</div>
            </div>
            {% endif %}
            
            {% if analytics.salary_stats.std %}
            <div class="stat-card">
                <h4>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ</h4>
                <div class="stat-value">{{ analytics.salary_stats.std|floatformat:2 }} —Ä—É–±.</div>
                <div class="stat-label">—Ä–∞–∑–±—Ä–æ—Å –∑–Ω–∞—á–µ–Ω–∏–π</div>
            </div>
            {% endif %}
            
            {% if analytics.salary_quartiles %}
            <div class="stat-card">
                <h4>–ö–≤–∞—Ä—Ç–∏–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç</h4>
                <div class="stat-value">
                    Q1: {{ analytics.salary_quartiles.q1|floatformat:0 }}<br>
                    Q2: {{ analytics.salary_quartiles.q2|floatformat:0 }}<br>
                    Q3: {{ analytics.salary_quartiles.q3|floatformat:0 }}
                </div>
                <div class="stat-label">25%, 50%, 75% —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</div>
            </div>
            {% endif %}
        </div>
    </div>
    
    {% if analytics.by_position %}
    <div class="section">
        <h2>–ê–Ω–∞–ª–∏–∑ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º</h2>
        <table>
            <tr>
                <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–°—Ä–µ–¥–Ω–∏–π –æ–∫–ª–∞–¥</th>
                <th>–°—É–º–º–∞ –æ–∫–ª–∞–¥–æ–≤</th>
            </tr>
            {% for position, stats in analytics.by_position.items %}
            <tr>
                <td>{{ position }}</td>
                <td>{{ stats.count }}</td>
                <td>{{ stats.mean|floatformat:2 }} —Ä—É–±.</td>
                <td>{{ stats.sum|floatformat:2 }} —Ä—É–±.</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    
    {% if analytics.by_type %}
    <div class="section">
        <h2>–°—Ä–µ–¥–Ω–∏–µ –æ–∫–ª–∞–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
        <table>
            <tr>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</th>
                <th>–°—Ä–µ–¥–Ω–∏–π –æ–∫–ª–∞–¥</th>
            </tr>
            {% for emp_type, avg_salary in analytics.by_type.items %}
            <tr>
                <td>
                    <span class="employee-type {{ emp_type|lower }}">
                        {{ emp_type }}
                    </span>
                </td>
                <td>{{ avg_salary|floatformat:2 }} —Ä—É–±.</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    
    {% if analytics.bonus_stats %}
    <div class="section">
        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–µ–º–∏—è–º</h2>
        <div class="stat-container">
            <div class="stat-card">
                <h4>–û–±—â–∞—è —Å—É–º–º–∞ –ø—Ä–µ–º–∏–π</h4>
                <div class="stat-value">{{ analytics.bonus_stats.total_bonuses|floatformat:2 }} —Ä—É–±.</div>
            </div>
            
            <div class="stat-card">
                <h4>–°—Ä–µ–¥–Ω—è—è –ø—Ä–µ–º–∏—è</h4>
                <div class="stat-value">{{ analytics.bonus_stats.avg_bonus|floatformat:2 }} —Ä—É–±.</div>
            </div>
            
            <div class="stat-card">
                <h4>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–µ–º–∏—è</h4>
                <div class="stat-value">{{ analytics.bonus_stats.max_bonus|floatformat:2 }} —Ä—É–±.</div>
            </div>
            
            {% if analytics.bonus_stats.min_bonus %}
            <div class="stat-card">
                <h4>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–µ–º–∏—è</h4>
                <div class="stat-value">{{ analytics.bonus_stats.min_bonus|floatformat:2 }} —Ä—É–±.</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    {% if analytics.by_payment_type %}
    <div class="section">
        <h2>–í—ã–ø–ª–∞—Ç—ã –ø–æ —Ç–∏–ø–∞–º</h2>
        <table>
            <tr>
                <th>–¢–∏–ø –≤—ã–ø–ª–∞—Ç—ã</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–û–±—â–∞—è —Å—É–º–º–∞</th>
                <th>–°—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞</th>
            </tr>
            {% for payment_type, stats in analytics.by_payment_type.items %}
            <tr>
                <td>{{ payment_type }}</td>
                <td>{{ stats.count }}</td>
                <td>{{ stats.sum|floatformat:2 }} —Ä—É–±.</td>
                <td>{{ stats.mean|floatformat:2 }} —Ä—É–±.</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    
    {% if analytics.top_employees_by_bonus %}
    <div class="section">
        <h2>–¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ –±–æ–Ω—É—Å–∞–º</h2>
        <table>
            <tr>
                <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
                <th>–°—É–º–º–∞ –±–æ–Ω—É—Å–æ–≤</th>
            </tr>
            {% for employee, total_bonus in analytics.top_employees_by_bonus.items %}
            <tr>
                <td>{{ employee }}</td>
                <td>{{ total_bonus|floatformat:2 }} —Ä—É–±.</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
    
    <!-- –ë–ª–æ–∫ —Å —Ç–µ–∫—É—â–∏–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ -->
    <div class="section">
        <h2>–¢–µ–∫—É—â–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ</h2>
        <table>
            <tr>
                <th>–§–ò–û</th>
                <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
                <th>–û–∫–ª–∞–¥</th>
                <th>–°—Ç–∞–∂</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            </tr>
            {% for emp in employees %}
            <tr>
                <td>{{ emp.name }}</td>
                <td>{{ emp.calculated_position }}</td>
                <td>{{ emp.price|floatformat:2 }} —Ä—É–±.</td>
                <td>{{ emp.quantity }} –ª–µ—Ç</td>
                <td>
                    <span class="employee-type {{ emp.calculated_employee_type|lower }}">
                        {{ emp.calculated_employee_type }}
                    </span>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; padding: 20px;">
                    –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    
    {% else %}
    <div class="highlight">
        <h3>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</h3>
        <p>–í —Å–∏—Å—Ç–µ–º–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –∏ –≤—ã–ø–ª–∞—Ç–∞—Ö.</p>
        <p><a href="/">–î–æ–±–∞–≤—å—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</a> –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.</p>
    </div>
    {% endif %}
    
    <div class="section highlight">
        <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∞–Ω–∞–ª–∏–∑–∞:</h3>
        <ul>
            <li><strong>Django ORM</strong> - –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö</li>
            {% if analytics.pandas_available %}
            <li><strong>Pandas</strong> - –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö</li>
            <li><strong>NumPy</strong> - –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π</li>
            {% endif %}
            <li><strong>–ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã</strong> - —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–∞</li>
            <li><strong>5+ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π</strong> - —Å—É–º–º–∞, —Å—Ä–µ–¥–Ω–µ–µ, –º–µ–¥–∏–∞–Ω–∞, –º–∞–∫—Å–∏–º—É–º, –º–∏–Ω–∏–º—É–º, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ</li>
            <li><strong>SQL-–∑–∞–ø—Ä–æ—Å—ã</strong> - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ –ë–î</li>
        </ul>
        
        <h4 style="margin-top: 20px;">üìä –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã:</h4>
        <ol>
            <li>–ü–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (Junior/Middle/Senior)</li>
            <li>5+ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Pandas</li>
            <li>–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞–∂-–∑–∞—Ä–ø–ª–∞—Ç–∞</li>
            <li>–ö–≤–∞—Ä—Ç–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç</li>
            <li>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º –∏ —Ç–∏–ø–∞–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</li>
        </ol>
    </div>
</body>
</html>